CREATE TABLE device_application (id BIGSERIAL, device_id BIGINT NOT NULL, name VARCHAR(250), version VARCHAR(45), identifier VARCHAR(45), size VARCHAR(45), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE device_event (id BIGSERIAL, device_id BIGINT NOT NULL, model VARCHAR(45), event_type VARCHAR(45), event_name VARCHAR(45), sent_by BIGINT NOT NULL, status BIGINT DEFAULT 0, manage_event_flag BIGINT DEFAULT 1, command_data VARCHAR(255), command_uuid VARCHAR(32), sender_email VARCHAR(255), owner_name VARCHAR(255), note VARCHAR(255), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE device_inventory (id BIGSERIAL, device_name VARCHAR(255), manufacturer VARCHAR(255), product_name VARCHAR(255), device_type VARCHAR(255), registration_id VARCHAR(255), enroll_status BIGINT DEFAULT 0, version VARCHAR(45), organization VARCHAR(250), location VARCHAR(250), platform BIGINT, purchase_date TIMESTAMP, warranty_end TIMESTAMP, user_id BIGINT NOT NULL, owner_name VARCHAR(250), owner_email VARCHAR(250), udid VARCHAR(64), imei VARCHAR(64), wifi_mac_address VARCHAR(64), passcode VARCHAR(32), model VARCHAR(50), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE inventory_attribute (id BIGSERIAL, name VARCHAR(250) NOT NULL, slug VARCHAR(250), inventory_group_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE inventory_attribute_group (id BIGSERIAL, name VARCHAR(255), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE inventory_information (id BIGSERIAL, device_id BIGINT NOT NULL, value text, inventory_group_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
ALTER TABLE device_application ADD CONSTRAINT device_application_device_id_device_inventory_id FOREIGN KEY (device_id) REFERENCES device_inventory(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE device_event ADD CONSTRAINT device_event_device_id_device_inventory_id FOREIGN KEY (device_id) REFERENCES device_inventory(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE inventory_attribute ADD CONSTRAINT iiii FOREIGN KEY (inventory_group_id) REFERENCES inventory_attribute_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE inventory_information ADD CONSTRAINT inventory_information_device_id_device_inventory_id FOREIGN KEY (device_id) REFERENCES device_inventory(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE inventory_information ADD CONSTRAINT iiii_2 FOREIGN KEY (inventory_group_id) REFERENCES inventory_attribute_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
CREATE TABLE role (id BIGSERIAL, role_name VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY(id));
CREATE TABLE user_info (id BIGSERIAL, tenant_id BIGINT, user_name VARCHAR(50) NOT NULL, password VARCHAR(90) NOT NULL, first_name VARCHAR(255), last_name VARCHAR(255), email VARCHAR(255) NOT NULL, role_id BIGINT NOT NULL, status BIGINT DEFAULT 0, otp VARCHAR(6), otp_upd_dt TIMESTAMP, last_login TIMESTAMP, phone_number VARCHAR(50), birthday TIMESTAMP, secret VARCHAR(16), token VARCHAR(500), PRIMARY KEY(id));
ALTER TABLE user_info ADD CONSTRAINT user_info_role_id_role_id FOREIGN KEY (role_id) REFERENCES role(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
